<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Class Management - {{classData.class_name}} - FUNLEARN</title>
    <link rel="stylesheet" href="/tailwind.css">
    <link rel="stylesheet" href="/funlearn-styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
</head>
<body class="bg-gray-50">
    {{> header}}

    <div class="container mx-auto px-6 py-8">
        <!-- Navigation -->
        <div class="flex items-center space-x-2 text-sm text-gray-500 mb-6">
            <a href="/teacher/dashboard" class="hover:text-blue-600">Dashboard</a>
            <i class="fas fa-chevron-right text-xs"></i>
            <a href="/teacher/classes" class="hover:text-blue-600">Classes</a>
            <i class="fas fa-chevron-right text-xs"></i>
            <a href="/teacher/classes/{{classData.id}}" class="hover:text-blue-600">{{classData.class_name}}</a>
            <i class="fas fa-chevron-right text-xs"></i>
            <span class="text-gray-800">Class Management</span>
        </div>

        <!-- Success/Error Messages -->
        {{#if successMessage}}
        <div class="mb-6 p-4 bg-green-100 border border-green-400 text-green-700 rounded-lg flex items-center justify-between">
            <div class="flex items-center">
                <i class="fas fa-check-circle text-green-500 mr-3"></i>
                <span>{{successMessage}}</span>
            </div>
            <button onclick="this.parentElement.style.display='none'" class="text-green-700 hover:text-green-900">
                <i class="fas fa-times"></i>
            </button>
        </div>
        {{/if}}

        {{#if errorMessage}}
        <div class="mb-6 p-4 bg-red-100 border border-red-400 text-red-700 rounded-lg flex items-center justify-between">
            <div class="flex items-center">
                <i class="fas fa-exclamation-circle text-red-500 mr-3"></i>
                <span>{{errorMessage}}</span>
            </div>
            <button onclick="this.parentElement.style.display='none'" class="text-red-700 hover:text-red-900">
                <i class="fas fa-times"></i>
            </button>
        </div>
        {{/if}}

        <!-- Class Header -->
        <div class="bg-gradient-to-br from-blue-600 via-purple-600 to-indigo-700 text-white rounded-3xl p-8 mb-8 shadow-2xl">
            <div class="flex items-center justify-between">
                <div class="flex items-center">
                    <div class="w-16 h-16 bg-white/20 rounded-full flex items-center justify-center text-white text-2xl mr-6 backdrop-blur-sm">
                        üéØ
                    </div>
                    <div>
                        <h1 class="text-4xl md:text-5xl font-bold mb-2">Class Management</h1>
                        <p class="text-blue-100 text-lg mb-4">{{classData.class_name}}</p>
                        <div class="flex items-center space-x-6 text-sm">
                            <div class="bg-white/10 backdrop-blur-sm rounded-lg px-3 py-2">
                                <span class="text-blue-200">Class Code:</span>
                                <span class="font-bold ml-2">{{classData.class_code}}</span>
                            </div>
                            <div class="bg-white/10 backdrop-blur-sm rounded-lg px-3 py-2">
                                <span class="text-blue-200">Students:</span>
                                <span class="font-bold ml-2">{{classData.students.length}}</span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="hidden lg:block">
                    <div class="text-center">
                        <div class="text-6xl mb-2">üìä</div>
                        <p class="text-blue-200 text-sm">Management Hub</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Management Grid -->
        <div class="grid md:grid-cols-2 gap-8 mb-8">
            <!-- Assignments -->
            <a href="/teacher/classes/{{classData.id}}/assignments" class="group">
                <div class="bg-white rounded-2xl p-8 shadow-lg hover:shadow-xl transition-all duration-300 border-2 border-dashed border-blue-300 hover:border-blue-500 hover:bg-blue-50">
                    <div class="text-center">
                        <div class="w-20 h-20 bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl flex items-center justify-center text-white text-4xl mx-auto mb-6 group-hover:scale-110 transition-transform">
                            üìù
                        </div>
                        <h2 class="text-3xl font-bold text-gray-800 mb-4 group-hover:text-blue-600 transition-colors">Assignments</h2>
                        <p class="text-gray-600 text-lg mb-6">Create and manage assignments</p>
                        <div class="flex items-center justify-center space-x-4 text-sm text-gray-500">
                            <span class="bg-blue-100 text-blue-800 px-3 py-1 rounded-full">{{assignmentStats.total}} Total</span>
                            <span class="bg-green-100 text-green-800 px-3 py-1 rounded-full">{{assignmentStats.active}} Active</span>
                        </div>
                    </div>
                </div>
            </a>

            <!-- Progress Tracking -->
            <a href="/teacher/classes/{{classData.id}}/progress" class="group">
                <div class="bg-white rounded-2xl p-8 shadow-lg hover:shadow-xl transition-all duration-300 border-2 border-dashed border-green-300 hover:border-green-500 hover:bg-green-50">
                    <div class="text-center">
                        <div class="w-20 h-20 bg-gradient-to-br from-green-500 to-green-600 rounded-2xl flex items-center justify-center text-white text-4xl mx-auto mb-6 group-hover:scale-110 transition-transform">
                            üìä
                        </div>
                        <h2 class="text-3xl font-bold text-gray-800 mb-4 group-hover:text-green-600 transition-colors">Progress Tracking</h2>
                        <p class="text-gray-600 text-lg mb-6">Monitor student progress</p>
                        <div class="flex items-center justify-center space-x-4 text-sm text-gray-500">
                            <span class="bg-green-100 text-green-800 px-3 py-1 rounded-full">{{progressStats.average}}% Avg</span>
                            <span class="bg-blue-100 text-blue-800 px-3 py-1 rounded-full">{{progressStats.active}} Active</span>
                        </div>
                    </div>
                </div>
            </a>

            <!-- Grades -->
            <a href="/teacher/classes/{{classData.id}}/grades" class="group">
                <div class="bg-white rounded-2xl p-8 shadow-lg hover:shadow-xl transition-all duration-300 border-2 border-dashed border-purple-300 hover:border-purple-500 hover:bg-purple-50">
                    <div class="text-center">
                        <div class="w-20 h-20 bg-gradient-to-br from-purple-500 to-purple-600 rounded-2xl flex items-center justify-center text-white text-4xl mx-auto mb-6 group-hover:scale-110 transition-transform">
                            üéØ
                        </div>
                        <h2 class="text-3xl font-bold text-gray-800 mb-4 group-hover:text-purple-600 transition-colors">Grades</h2>
                        <p class="text-gray-600 text-lg mb-6">View and manage grades</p>
                        <div class="flex items-center justify-center space-x-4 text-sm text-gray-500">
                            <span class="bg-purple-100 text-purple-800 px-3 py-1 rounded-full">{{gradeStats.average}}% Avg</span>
                            <span class="bg-orange-100 text-orange-800 px-3 py-1 rounded-full">{{gradeStats.graded}} Graded</span>
                        </div>
                    </div>
                </div>
            </a>

            <!-- Settings -->
            <a href="/teacher/classes/{{classData.id}}/settings" class="group">
                <div class="bg-white rounded-2xl p-8 shadow-lg hover:shadow-xl transition-all duration-300 border-2 border-dashed border-orange-300 hover:border-orange-500 hover:bg-orange-50">
                    <div class="text-center">
                        <div class="w-20 h-20 bg-gradient-to-br from-orange-500 to-orange-600 rounded-2xl flex items-center justify-center text-white text-4xl mx-auto mb-6 group-hover:scale-110 transition-transform">
                            ‚öôÔ∏è
                        </div>
                        <h2 class="text-3xl font-bold text-gray-800 mb-4 group-hover:text-orange-600 transition-colors">Settings</h2>
                        <p class="text-gray-600 text-lg mb-6">Class configuration</p>
                        <div class="flex items-center justify-center space-x-4 text-sm text-gray-500">
                            <span class="bg-orange-100 text-orange-800 px-3 py-1 rounded-full">
                                {{#if classData.is_active}}Active{{else}}Inactive{{/if}}
                            </span>
                            <span class="bg-gray-100 text-gray-800 px-3 py-1 rounded-full">{{classData.semester}}</span>
                        </div>
                    </div>
                </div>
            </a>
        </div>

        <!-- Quick Actions -->
        <div class="bg-white rounded-2xl p-6 shadow-lg">
            <h3 class="text-2xl font-bold text-gray-800 mb-6">‚ö° Quick Actions</h3>
            <div class="grid md:grid-cols-4 gap-4">
                <button onclick="createAssignment()" class="p-4 bg-blue-50 hover:bg-blue-100 rounded-lg transition-colors text-center">
                    <i class="fas fa-plus text-blue-600 text-2xl mb-2"></i>
                    <p class="text-sm font-semibold text-blue-800">New Assignment</p>
                </button>
                
                <button onclick="exportGrades()" class="p-4 bg-green-50 hover:bg-green-100 rounded-lg transition-colors text-center">
                    <i class="fas fa-download text-green-600 text-2xl mb-2"></i>
                    <p class="text-sm font-semibold text-green-800">Export Grades</p>
                </button>
                
                <button onclick="sendAnnouncement()" class="p-4 bg-purple-50 hover:bg-purple-100 rounded-lg transition-colors text-center">
                    <i class="fas fa-bullhorn text-purple-600 text-2xl mb-2"></i>
                    <p class="text-sm font-semibold text-purple-800">Send Announcement</p>
                </button>
                
                <button onclick="viewAnalytics()" class="p-4 bg-orange-50 hover:bg-orange-100 rounded-lg transition-colors text-center">
                    <i class="fas fa-chart-bar text-orange-600 text-2xl mb-2"></i>
                    <p class="text-sm font-semibold text-orange-800">View Analytics</p>
                </button>
            </div>
        </div>
    </div>

    <script>
        // Quick action functions
        function createAssignment() {
            window.location.href = '/teacher/classes/{{classData.id}}/assignments/create';
        }

        function exportGrades() {
            // TODO: Implement grade export
            alert('Grade export functionality coming soon!');
        }

        function sendAnnouncement() {
            // TODO: Implement announcement system
            alert('Announcement system coming soon!');
        }

        function viewAnalytics() {
            window.location.href = '/teacher/classes/{{classData.id}}/analytics';
        }

        // Add interactive animations
        document.addEventListener('DOMContentLoaded', function() {
            // Auto-hide success/error messages after 5 seconds
            const messages = document.querySelectorAll('.bg-green-100, .bg-red-100');
            messages.forEach(message => {
                setTimeout(() => {
                    message.style.opacity = '0';
                    setTimeout(() => {
                        message.style.display = 'none';
                    }, 300);
                }, 5000);
            });

            // Add hover effects to management cards
            document.querySelectorAll('.group').forEach(card => {
                card.addEventListener('mouseenter', function() {
                    this.style.transform = 'translateY(-4px)';
                });
                
                card.addEventListener('mouseleave', function() {
                    this.style.transform = 'translateY(0)';
                });
            });
        });
    </script>
</body>
</html>